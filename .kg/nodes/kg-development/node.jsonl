{"v": 1, "slug": "kg-development", "title": "kg-development", "type": "concept", "created_at": "2026-02-22T04:22:44.115085+00:00"}
{"id": "b-d92a3546", "type": "gotcha", "text": "release script ensure_clean() now filters '??' untracked lines from git status --porcelain \u2014 only tracked changes (no '??' prefix) block a release. Previously any output (including untracked .kg/ files) caused a false-dirty block. [[kg-architecture]]", "created_at": "2026-02-22T04:22:44.115360+00:00"}
{"id": "b-26262c37", "type": "gotcha", "text": ".kg/ runtime files (.kg/.claude/ symlink, .kg/nodes/ fleeting notes) are untracked by git and will appear in git status --porcelain output \u2014 add to .gitignore or use a filter that skips '??' lines", "created_at": "2026-02-22T04:22:48.184934+00:00"}
{"id": "b-a777c0e2", "type": "fact", "text": "Click CLI: add no_args_is_help=True to any @click.command() that has required arguments \u2014 shows full help (docstring + options) instead of the terse 'Missing argument X / Try --help' error when invoked bare. Applied to kg add, kg show, kg create, kg update, kg delete, kg run, kg mux send, kg launcher agent pause/resume/drain/migrate, kg agent create/delete.", "created_at": "2026-02-22T06:58:19.871281+00:00"}
{"id": "b-287d4740", "type": "fact", "text": "Install kg from local source as a uv tool (dev version): 'uv tool install --editable /path/to/kg' \u2014 changes to source are reflected immediately without reinstalling. To revert to published version: 'uv tool install kg --reinstall'. Check with 'uv tool list'.", "created_at": "2026-02-22T07:02:08.390131+00:00"}
{"id": "b-5d337a3e", "type": "fact", "text": ".kg/.gitignore should cover: index/, logs/, messages/, sessions/", "created_at": "2026-02-22T07:41:17.113920+00:00"}
{"id": "b-371c9c9a", "type": "fact", "text": "uv tool install --editable /path/to/pkg installs dev version as uv tool; changes to source reflected immediately without reinstall", "created_at": "2026-02-22T07:41:18.588055+00:00"}
{"id": "b-ec3533cf", "type": "gotcha", "text": "uv tool install --editable: changes in source are reflected immediately BUT running background processes (mux, launcher) loaded old code at start time. Must restart processes after code changes. Always restart via the same kg binary that started them.", "created_at": "2026-02-22T07:49:57.843395+00:00"}
{"id": "b-371c9c9a", "deleted": true}
{"id": "b-3bdfef07", "type": "gotcha", "text": "after creating new KG nodes (e.g. agent nodes written directly as node.jsonl files), run kg reindex to add them to the SQLite FTS database \u2014 otherwise web UI slugs won't resolve and node pages 404", "created_at": "2026-02-22T11:15:44.259975+00:00"}
{"id": "b-aea9acb9", "type": "gotcha", "text": "gotcha: system-installed kg (~/.local/share/uv/tools/kg/) and dev .venv/bin/kg can have schema mismatches \u2014 watcher using old binary will fail silently with 'SQL logic error' when DB schema changed", "created_at": "2026-02-22T11:28:05.278276+00:00"}
{"id": "b-5800f86a", "type": "success", "text": "fix schema mismatch: run .venv/bin/kg reindex to rebuild graph.db from scratch using dev schema, then .venv/bin/kg start to restart watcher with dev version", "created_at": "2026-02-22T11:28:09.187305+00:00"}
{"id": "b-c98dd67d", "type": "gotcha", "text": "gotcha: kg status and kg start produce no visible stdout when run via Claude Code Bash tool \u2014 rich renders to terminal but output is captured empty; use kg status > /dev/tty or check .kg/index/watcher.pid and vector_server.pid directly to verify services started", "created_at": "2026-02-24T20:33:06.073051+00:00"}
{"id": "b-19c5c6d8", "type": "fact", "text": "useplato/kg is a fork of sasha-s/kg; as of 2026-02-24 it has only 2 substantive additions over the initial commit: (1) shared DB connection in file_indexer.index_source() (conn param passed through), (2) null guards for slug in context.py (if slug is None check before .startswith()). Local sasha-s/kg has vastly more: agents, rich web UI, Rich CLI tables, --scope local hooks, --dev web mode [[kg-architecture]]", "created_at": "2026-02-24T20:38:42.314401+00:00"}
{"id": "b-17896953", "type": "note", "text": "backport applied (2026-02-24): file_indexer.index_source() now passes shared conn to index_file() + delete_file_index() \u2014 both functions accept optional conn param (own_conn pattern); also slug is None null guards added to context.py. Both files now match useplato/kg HEAD. [[kg-architecture]]", "created_at": "2026-02-24T20:38:46.734606+00:00", "updated_at": "2026-02-24T20:43:04.564468+00:00"}
{"id": "b-35c01053", "type": "decision", "text": "dual remotes: git remote rename origin sasha; git remote add plato https://github.com/useplato/kg.git \u2014 push to both to keep forks in sync. sasha-s/kg is canonical (more features); plato fork gets backports.", "created_at": "2026-02-24T20:43:11.978905+00:00"}
{"id": "b-45a2c6ef", "type": "fact", "text": "use 'uv run python' to import kg in dev context \u2014 no manual venv needed; uv auto-creates .venv from pyproject.toml+uv.lock. 'uv tool install --editable .' gives the CLI, 'uv run python' gives importable module. Both together = full dev setup.", "created_at": "2026-02-24T20:47:11.271447+00:00"}
{"id": "b-2c3e7e76", "type": "fact", "text": "dual remotes for sasha-s/kg + useplato/kg: 'git remote rename origin sasha && git remote add plato https://github.com/useplato/kg.git'. sasha-s/kg is canonical (far more features); useplato/kg is a downstream fork. Keep both to push/pull from either.", "created_at": "2026-02-24T20:47:13.539164+00:00"}
