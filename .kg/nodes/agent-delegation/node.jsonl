{"v": 1, "slug": "agent-delegation", "title": "agent-delegation", "type": "concept", "created_at": "2026-02-22T05:29:45.632313+00:00"}
{"id": "b-77e29655", "type": "gotcha", "text": "(gotcha) improve-web agent was told 'skip inotify / no new deps' but inotify-simple is already a core dep (linux-only). Always check existing deps before saying 'no new deps' \u2014 inotify is available in kg by default [[kg-architecture]]", "created_at": "2026-02-22T09:06:01.117717+00:00"}
{"id": "b-a2bf74ba", "type": "fact", "text": "improve-web agent pattern: autonomous worker agent in src/kg/web.py, reports to test agent (since web agent has no launcher/auto-start). test agent relays progress to human (web). Three-agent coordination: human(web) \u2192 test \u2192 improve-web \u2192 test \u2192 human", "created_at": "2026-02-22T09:06:06.191992+00:00"}
{"id": "b-185ee5ca", "type": "fact", "text": "relay/coordinator pattern: a named 'test' agent runs interactively ('kg run test') as coordinator between human (web UI pseudo-agent) and worker agents. Relay flow: human \u2192 send to test \u2192 test forwards to worker \u2192 worker reports to test \u2192 test reports to human via send_message MCP. Coordinator keeps session history for context. [[kg-agent-mux]] [[kg-web]]", "created_at": "2026-02-22T09:09:53.365560+00:00"}
{"id": "b-1a8250a7", "type": "fact", "text": "instructions\u2192mission rename: agent node naming convention changed \u2014 use agent-<name>-mission (not agent-<name>-instructions). hooks.py and cli.py updated; -instructions still supported as legacy fallback. [[kg-agent-mux]]", "created_at": "2026-02-22T09:24:52.542985+00:00"}
{"id": "b-5c1a9877", "type": "gotcha", "text": "KG node directory rename gotcha: renaming .kg/nodes/<old-slug>/ directory is NOT enough \u2014 the first line of node.jsonl contains {slug:, title:} header JSON that must also be updated. The DB (graph.db) reads from the JSONL files on reindex, so a directory-only rename leaves stale slug in the JSONL header.", "created_at": "2026-02-22T09:35:46.555087+00:00"}
{"id": "b-bf2bd760", "type": "fact", "text": "instructions\u2192mission rename (full): renamed all agent-<name>-instructions nodes to agent-<name>-mission. Required: (1) rename .kg/nodes/ dirs, (2) update node.jsonl header slug/title fields, (3) update hooks.py _load_agent_instructions() to try -mission first then -instructions fallback, (4) update cli.py 'kg agent create' to create -mission slug, (5) web.py already handles both suffixes in _agent_link_for_node().", "created_at": "2026-02-22T09:35:52.156925+00:00"}
{"id": "b-0164a592", "type": "fact", "text": "Claude Code session JSONL format: entries have type='user'/'assistant'/'progress'/'queue-operation'. User entries with tool_result content (not text) come after assistant tool_use entries \u2014 merging them by tool_use_id gives inline tool results. Thinking blocks appear in assistant content as type='thinking' with 'thinking' field.", "created_at": "2026-02-22T10:17:23.143966+00:00"}
